# Slack Bot ì„¤ì • ê°€ì´ë“œ

ë±ë‘¥ì´ ë´‡ì˜ Slack App ì„¤ì • ë°©ë²•ì…ë‹ˆë‹¤.

## Slack App ìƒì„±

1. [Slack API](https://api.slack.com/apps) ì ‘ì†
2. **Create New App** â†’ **From scratch** ì„ íƒ
3. App ì´ë¦„: `ë±ë‘¥ì´` (ë˜ëŠ” ì›í•˜ëŠ” ì´ë¦„)
4. Workspace ì„ íƒ

## OAuth & Permissions

### Bot Token Scopes (í•„ìˆ˜)

| Scope | ìš©ë„ |
|-------|------|
| `chat:write` | ë©”ì‹œì§€ ì „ì†¡ |
| `chat:write.public` | ê³µê°œ ì±„ë„ ë©”ì‹œì§€ ì „ì†¡ |
| `channels:read` | ê³µê°œ ì±„ë„ ëª©ë¡ ì¡°íšŒ |
| `channels:join` | ê³µê°œ ì±„ë„ ì°¸ì—¬ |
| `users:read` | ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ |
| `users:read.email` | ì‚¬ìš©ì ì´ë©”ì¼ ì¡°íšŒ |
| `app_mentions:read` | ì•± ë©˜ì…˜ ì½ê¸° |
| `commands` | ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ |
| `im:write` | DM ì „ì†¡ |

### í† í° ë°œê¸‰

1. **OAuth & Permissions** í˜ì´ì§€ì—ì„œ ìŠ¤ì½”í”„ ì¶”ê°€
2. **Install to Workspace** í´ë¦­
3. `xoxb-`ë¡œ ì‹œì‘í•˜ëŠ” **Bot User OAuth Token** ë³µì‚¬

## Socket Mode ì„¤ì •

ë¡œì»¬ ê°œë°œ ë° AWS Lambda ë°°í¬ ëª¨ë‘ ì§€ì›í•©ë‹ˆë‹¤.

### Socket Mode (ë¡œì»¬ ê°œë°œìš©)

1. **Socket Mode** í˜ì´ì§€ì—ì„œ í™œì„±í™”
2. **App-Level Tokens** ìƒì„±
   - Token Name: `socket-token`
   - Scope: `connections:write`
3. `xapp-`ë¡œ ì‹œì‘í•˜ëŠ” í† í° ë³µì‚¬

### Event Subscriptions (Lambda ë°°í¬ìš©)

1. **Event Subscriptions** í™œì„±í™”
2. Request URL: `https://your-api-gateway-url/slack/events`
3. Subscribe to bot events:
   - `app_mention`
   - `team_join`
   - `user_change`

## Slash Commands

| ëª…ë ¹ì–´ | Request URL | ì„¤ëª… |
|--------|-------------|------|
| `/ê°€ì´ë“œ` | `/slack/events` | ë™ì•„ë¦¬ ê°€ì´ë“œ ë³´ê¸° |
| `/ìµëª…ê±´ì˜` | `/slack/events` | ìµëª… ê±´ì˜ ëª¨ë‹¬ |

## Interactivity

1. **Interactivity & Shortcuts** í™œì„±í™”
2. Request URL: `https://your-domain/slack/events`

## í™˜ê²½ ë³€ìˆ˜

```bash
# Bot Token (xoxb-)
SLACK_BOT_TOKEN=xoxb-your-bot-token

# App Token - Socket Modeìš© (xapp-)
SLACK_APP_TOKEN=xapp-your-app-token

# Signing Secret
SLACK_SIGNING_SECRET=your-signing-secret
```

## ì´ë²¤íŠ¸ ê³µì§€ ê¸°ëŠ¥

### ë™ì‘ ë°©ì‹

1. ê´€ë¦¬ìê°€ ëŒ€ì‹œë³´ë“œì—ì„œ ì´ë²¤íŠ¸ ìƒì„±
2. "Slack ê³µì§€" ë²„íŠ¼ í´ë¦­
3. ì±„ë„ ì„ íƒ ë° ì‘ë‹µ ì˜µì…˜ ì„¤ì •
4. ê³µì§€ ë©”ì‹œì§€ ì „ì†¡
5. íšŒì›ë“¤ì´ ë²„íŠ¼ìœ¼ë¡œ ì°¸ì„ ì—¬ë¶€ ì‘ë‹µ
6. ì‹¤ì‹œê°„ìœ¼ë¡œ ì‘ë‹µ í˜„í™© ì—…ë°ì´íŠ¸

### Block Kit ë©”ì‹œì§€ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… 2024 ì •ê¸° ì´íšŒ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ ì¥ì†Œ        â”‚ ğŸ• ì¼ì‹œ                â”‚
â”‚ ê³µí•™ê´€ 301í˜¸   â”‚ 2024ë…„ 3ì›” 15ì¼ ê¸ˆìš”ì¼  â”‚
â”‚               â”‚ ì˜¤í›„ 6:00              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2024ë…„ 1í•™ê¸° ì •ê¸° ì´íšŒì…ë‹ˆë‹¤.            â”‚
â”‚ ì°¸ì„ ì—¬ë¶€ë¥¼ ì‘ë‹µí•´ì£¼ì„¸ìš”.                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… ì°¸ì„: 5ëª… | ğŸ’» ì˜¨ë¼ì¸: 2ëª… | âŒ ë¶ˆì°¸: 1ëª… â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [âœ… ì°¸ì„] [ğŸ’» ì˜¨ë¼ì¸] [â° ëŠ¦ì°¸] [âŒ ë¶ˆì°¸] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Action ID íŒ¨í„´

- `event_response_attend` - ì°¸ì„
- `event_response_online` - ì˜¨ë¼ì¸
- `event_response_late` - ëŠ¦ì°¸
- `event_response_absent` - ë¶ˆì°¸

## í…ŒìŠ¤íŠ¸

```bash
# ë¡œì»¬ì—ì„œ ë´‡ ì‹¤í–‰
pnpm dev:bot

# ì •ìƒ ì—°ê²° ì‹œ ì¶œë ¥
# âœ… ì•¡ì…˜ í•¸ë“¤ëŸ¬ ë“±ë¡ ì™„ë£Œ
# âš¡ï¸ Bolt app is running!
```

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### í† í° ê¶Œí•œ ì˜¤ë¥˜

```
Error: missing_scope
```
â†’ Bot Token Scopesì— í•„ìš”í•œ ê¶Œí•œ ì¶”ê°€

### ì±„ë„ ì ‘ê·¼ ì˜¤ë¥˜

```
Error: channel_not_found
```
â†’ ë´‡ì´ ì±„ë„ì— ì´ˆëŒ€ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸, ë˜ëŠ” `channels:join` ìŠ¤ì½”í”„ ì¶”ê°€
